require_relative 'log_parser'

describe LogParser do
  let(:sample) { "sample_log_small.txt"}
  let(:log_parser) { LogParser.new sample }
  context 'parses logfile' do
    it 'returns total number of requests' do
      expect(log_parser.parse).to eq ({1414078678=>1})
      large_log = LogParser.new "sample_log_large.txt"
      expect(large_log.parse).to eq ({1414078678=>1, 1414078679=>21, 1414078680=>16, 1414078681=>17, 1414078682=>16, 1414078683=>17, 1414078684=>16, 1414078685=>17, 1414078686=>17, 1414078687=>16, 1414078688=>16, 1414078689=>16, 1414078690=>18, 1414078691=>18, 1414078692=>17, 1414078693=>18, 1414078694=>19, 1414078695=>19, 1414078696=>19, 1414078697=>18, 1414078698=>18, 1414078699=>22, 1414078700=>17, 1414078701=>21, 1414078702=>20, 1414078703=>20, 1414078704=>19, 1414078705=>19, 1414078706=>21, 1414078707=>21, 1414078708=>20, 1414078709=>20, 1414078710=>21, 1414078711=>21, 1414078712=>18, 1414078713=>18, 1414078714=>16, 1414078715=>17, 1414078716=>17, 1414078717=>16, 1414078718=>17, 1414078719=>16, 1414078720=>17, 1414078721=>16, 1414078722=>16, 1414078723=>17, 1414078724=>16, 1414078725=>16, 1414078726=>17, 1414078727=>15, 1414078728=>15, 1414078729=>16, 1414078730=>15, 1414078731=>14, 1414078732=>15, 1414078733=>14, 1414078734=>20, 1414078735=>14, 1414079966=>2, 1414079967=>1, 1414079968=>2, 1414079969=>2, 1414079970=>2, 1414079971=>1, 1414079972=>1, 1414079973=>4, 1414079974=>2, 1414079975=>2, 1414079976=>2, 1414079977=>1, 1414079978=>1, 1414079979=>2, 1414079980=>1, 1414079981=>3, 1414079982=>2, 1414079983=>1, 1414079984=>3, 1414079985=>2, 1414079986=>2, 1414079987=>1, 1414079988=>2, 1414079989=>3, 1414079990=>2, 1414079991=>2, 1414079992=>3, 1414079993=>2, 1414079994=>1, 1414079995=>1, 1414079996=>1, 1414079997=>3, 1414079998=>2, 1414079999=>1, 1414080000=>2, 1414080001=>2, 1414080002=>3, 1414080003=>1, 1414080004=>3, 1414080005=>2, 1414080006=>2, 1414080007=>1, 1414080008=>1, 1414080009=>3, 1414080010=>1, 1414080011=>2, 1414080012=>2, 1414080013=>3, 1414080014=>2, 1414080015=>1, 1414080016=>1, 1414080017=>2, 1414080018=>1, 1414080019=>3, 1414080020=>1, 1414080021=>1, 1414080022=>1, 1414080023=>3, 1414080024=>1, 1414080025=>1, 1414080026=>1, 1414080027=>1, 1414080028=>2, 1414080029=>1, 1414080030=>2, 1414080031=>3, 1414080032=>1, 1414080033=>4, 1414080034=>2, 1414080035=>4, 1414080036=>1, 1414080037=>2, 1414080038=>2, 1414080039=>3, 1414080040=>2, 1414080041=>3, 1414080042=>2, 1414080043=>2, 1414080044=>3, 1414080045=>1, 1414080046=>3, 1414080047=>2, 1414080048=>1, 1414080049=>3, 1414080050=>4, 1414080051=>1, 1414080052=>1, 1414080053=>4, 1414080054=>1, 1414080055=>2, 1414080056=>2, 1414080057=>2, 1414080058=>1, 1414080059=>2, 1414080060=>2, 1414080061=>1, 1414080062=>1, 1414080063=>4, 1414080064=>1, 1414080065=>2, 1414080066=>1, 1414080067=>2, 1414080068=>1, 1414080069=>2, 1414080070=>3})
    end

  end
end
